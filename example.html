<!doctype html>
<html>
<head>
    <title></title>
    <style type="text/css">
        html, body{
            margin:0;
            padding: 0;
            font-family: helvetica, arial, sans-serif;
        }

        .box{
            font-size:50px;
            display: block;
            position: relative;
            width:160px;
            height:160px;
            padding:20px;
            background-color: gray;
            float: left;
            margin-left: 10px;
            margin-top: 10px;
            opacity:1;

        }
    </style>
</head>
<body>
    <div id="container"></div>
    <script src="shuffle.js"></script>
    <script>
        var container = document.getElementById('container'),
            shuffle = require('./index.js')(container, {
                compare: function(el) {
                    return el.getAttribute('data-val');
                },
                sort: function(el){
                    return parseInt(el.getAttribute('data-val'), 10);    
                }
            }),
            _ = require('underscore');


         // first, let's populate the container with some nodes. 
        _.each(randArr(), function(n) {
            container.appendChild(div(n));
        });


        var ctr = 0;
        var intvl = setInterval(function() {
            ctr++;
            // generate some new nodes
            var divs = _.map(randArr(), function(n) {
                return div(n);
            });

            // shove it into the container
            shuffle.add(divs);

            // run this loop 30 times. because.
            if (ctr === 30) {
                clearInterval(intvl);
            }
        }, 2000);



        function div(val) {
            var div = document.createElement('div');
            div.className = 'box';
            var time = Date.now();
            div.innerHTML = val;
            div.setAttribute('data-val', val + '');
            div.setAttribute('data-time', time + '');
            return div;
        }

        function randArr() {
            return _(25).chain().times(function(n) {
                return n;
            }).shuffle().value().slice(5);
        }

    </script>


</body>
</html>